{% extends 'eightpillars/base.html' %}
{% load humanize %}
{% load formatit %}

{% block content %}
<div id="mainview">
    {% if eightpillardata %}
        <div>
            <input type="checkbox" id="peck" /> PE 
            <input type="checkbox" id="pmck" /> PROFIT MARGIN
            <input type="checkbox" id="revck" /> REVENUE GROWTH
            <input type="checkbox" id="prock" /> PROFIT GROWTH
            <input type="checkbox" id="shck" /> SHARES OUTSTANDING
            <input type="checkbox" id="quck" /> QUICK RATIO
            <input type="checkbox" id="fcfck" /> FREE CASH FLOW
            <input type="checkbox" id="afcfck" /> AFCFV VS MARKET CAP
        </div>
        {% for obj in eightpillardata %}
            <table style="border: 2px solid black;" class="eightpillartbl">
                <tr>
                    <th colspan=6>Company: {{obj.company_name}} ({{obj.ticker}}) <i style="font-size: 10px;">last updated: {{obj.last_updated}}</i></th>
                </tr>
                <tr>
                    <th>PE (<20)</th>
                    <td>{{obj.Pe}}</td>
                    <td>{% if obj.is_pe_acceptable %}<i class="material-icons dp48">check_circle</i>{% else %}<i class="material-icons dp48">clear</i>{% endif %}           
                    <th>Shares Outstanding Reduced</th>
                    <td>Current: {{obj.shares_outstanding|intcomma}} 4 years ago: {{obj.earliest_shares_outstanding|intcomma}}</td>
                    <td>{% if obj.are_shares_outstanding_shrinking %}<i class="material-icons dp48">check_circle</i>{% else %}<i class="material-icons dp48">clear</i>{% endif %}           
                </tr>
                <tr>
                    <th>Profit Margin > 10%</th>
                    <td>{{obj.profit_margin|to_percent:0}}</td>
                    <td>{% if obj.is_profit_margin_acceptable %}<i class="material-icons dp48">check_circle</i>{% else %}<i class="material-icons dp48">clear</i>{% endif %}</td>
                    <th>Quick Ratio</th>
                    <td>{{obj.quick_ratio|to_percent:0}}</td>
                    <td>{% if obj.is_quick_ratio_positive %}<i class="material-icons dp48">check_circle</i>{% else %}<i class="material-icons dp48">clear</i>{% endif %}        
                </tr>
                <tr>
                    <th>Revenue Growth (4 years)</th>
                    <td>Current: {{obj.latest_revenue|intcomma}} 4 years ago: {{obj.earliest_revenue|intcomma}}</td>
                    <td>{% if obj.is_revenue_growing %}<i class="material-icons dp48">check_circle</i>{% else %}<i class="material-icons dp48">clear</i>{% endif %}           
                    <th>Free Cash Flow</th>
                    <td>
                        Current: {{obj.latest_free_cash_flow|intcomma}} 
                        4 years ago: {{obj.earliest_free_cash_flow|intcomma}} 
                        <br /> 
                        4 year avg: {{obj.average_cash_flow|intcomma}}                    
                    </td>    
                    <td>{% if obj.is_cash_flow_growing %}<i class="material-icons dp48">check_circle</i>{% else %}<i class="material-icons dp48">clear</i>{% endif %}               
                </tr>
                <tr>
                    <th>Profit Growth (4 years)</th>
                    <td>Current: {{obj.latest_net_income|intcomma}} 4 years ago: {{obj.earliest_net_income|intcomma}}</td>        
                    <td>{% if obj.is_net_income_growing %}<i class="material-icons dp48">check_circle</i>{% else %}<i class="material-icons dp48">clear</i>{% endif %}           
                    <th>4 year Average Free Cash Flow * 20 <br />compared to Market Cap</th>
                    <td>AFCF Value: {{obj.cash_flow_value|intcomma}} <br /> vs Market Cap: {{obj.market_cap|intcomma}}</td>     
                    <td>{% if obj.is_market_price_worth %}<i class="material-icons dp48">check_circle</i>{% else %}<i class="material-icons dp48">clear</i>{% endif %}                
                </tr>  
            </table>
        {% endfor %}
        <script>
            
        </script>
    {% else %}
        <tr>
            <td>{{message}}</td>
        </tr>
    {% endif %}
</div>

{% endblock %}